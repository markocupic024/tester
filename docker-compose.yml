services:
  tester:
    build:
      context: .
      dockerfile: Dockerfile
    image: tester:latest
    container_name: tester
    volumes:
      # Mount reports directory for output
      - ./reports:/output
      # OWASP ZAP support
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      # Chromium configuration
      - CHROME_BIN=/usr/bin/chromium
      - CHROME_PATH=/usr/bin/chromium
      - PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
      - PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium
      # Display configuration for headless
      - DISPLAY=:99
    # Network configuration
    network_mode: bridge
    # Security options
    security_opt:
      - seccomp:unconfined
